function handlers(){$("#title").click(function(){location.hash=""}),$("#select").click(function(){$("#countries").show(),$("#countries").html(""),$("#overlay").show(),countries.name.forEach(function(a,b){stateById.get(countries.iso3[b])&&wmById.get(countries.iso3[b])&&$("#countries").append("<div iso='"+countries.iso2[b]+"'>"+a+"</div>")}),$("#countries div").click(function(){location.hash=$(this).attr("iso"),$("#overlay").hide(),$("#countries").hide(),location.hash.split("#")[1]&&$(".label, svg").css("opacity",1)}),location.hash.split("#")[1]&&($(".label, svg").css("opacity",.2),$("#countries [iso='"+location.hash.split("#")[1]+"']").addClass("selected"))}),$("#overlay").click(function(){$("#overlay").hide(),$("#countries").hide(),location.hash.split("#")[1]&&$(".label, svg").css("opacity",1)}),$(window).on("hashchange",function(a){1==intro?intro++:intro>1&&$("#intro").hide(),$("#labels").show(),location.hash.split("#")[1]?(focusCountry(location.hash.split("#")[1]),$("#labels").css({"pointer-events":"all"}),$(".outer, .inner, .circles, .poly").css({opacity:1,"pointer-events":"all"})):(resetView(),$("#labels").css({opacity:0,"pointer-events":"none"}),$(".outer, .inner, .circles, .poly").css({opacity:0,"pointer-events":"none"}))})}function skip(){$("#intro").hide()}function con(a){$("#intro"+(a-1)).hide(),$("#intro"+a).length?($("#intro"+a).show(),1==a&&(location.hash="BR"),2==a&&($(".outer [iso3='PRT']").trigger("mouseover"),$(".circles [bli='ES']").trigger("mouseover"),$(".circles [bli='HS']").trigger("mouseover"),$(".circles [bli='SW']").trigger("mouseover")),3==a&&($(".outer [iso3='PRT']").trigger("mouseout"),$(".circles [bli='ES']").trigger("mouseout"),$(".circles [bli='HS']").trigger("mouseout"),$(".circles [bli='SW']").trigger("mouseout"),location.hash="",intro=1,$("#intro").css("pointer-events","none"))):skip()}var state={country:void 0},intro=0,bliNames={CG:"Civic Engagement",SC:"Community",ES:"Education",EQ:"Environment ",HS:"Health",HO:"Housing",IW:"Income",JE:"Jobs",SW:"Life Satisfaction",PS:"Security",WL:"Work Life Balnce"};$(function(){handlers(),initDonut(),initLabels(),$("#intro0").show()});