function handlers(){$("#title").click(function(){location.hash=""}),$("#select").click(function(){$("#countries").show(),$("#countries").html(""),$("#overlay").show(),countries.name.forEach(function(a,b){stateById.get(countries.iso3[b])&&wmById.get(countries.iso3[b])&&$("#countries").append("<div iso='"+countries.iso2[b]+"'>"+a+"</div>")}),$("#countries div").click(function(){location.hash=$(this).attr("iso"),$("#overlay").hide(),$("#countries").hide(),location.hash.split("#")[1]&&$(".label, svg").css("opacity",1)}),location.hash.split("#")[1]&&($(".label, svg").css("opacity",.2),$("#countries [iso='"+location.hash.split("#")[1]+"']").addClass("selected"))}),$("#overlay").click(function(){$("#overlay").hide(),$("#countries").hide(),location.hash.split("#")[1]&&$(".label, svg").css("opacity",1)}),$(window).on("hashchange",function(a){$("#labels").show(),location.hash.split("#")[1]?(focusCountry(location.hash.split("#")[1]),$("#labels").css({"pointer-events":"all"}),$(".outer, .inner").css({opacity:1,"pointer-events":"all"})):(resetView(),$("#labels").css({opacity:0,"pointer-events":"none"}),$(".outer, .inner").css({opacity:0,"pointer-events":"none"}))})}var state={country:void 0};$(function(){handlers(),initDonut(),initLabels()});